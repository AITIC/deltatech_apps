<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="report_saleorder_document_specification" inherit_id="sale.report_saleorder_document">
			<xpath expr="//div[@t-if='o.payment_term']" position="after">
				<div t-if="o.specification" class="col-xs-3">
					<strong>Primary Quantity:</strong>
					<p>
						<t t-set='qty_primary' t-value='o.qty_primary or 1' />
						<span t-field="o.qty_primary" />
						<span t-field="o.primary_uom" />
					</p>
				</div>
			</xpath>

			<xpath expr="//tbody[@class='sale_tbody']/preceding-sibling::*[1]" position="replace">
				<thead>
					<tr>
						<th>Description</th>
						<th class="text-right">Quantity</th>
						<th class="text-right">Unit Price</th>
						<th class="text-right">Price</th>
					</tr>
				</thead>
			</xpath>

			<xpath expr="//tbody[@class='sale_tbody']" position="replace">

				<tbody t-if='not o.specification' class="sale_tbody">
					<tr t-foreach="o.order_line" t-as="l">
						<td>
							<span t-field="l.name" />
						</td>
						<td class="text-right">
							<span t-field="l.product_uom_qty" />
							<span groups="product.group_uom" t-field="l.product_uom" />
						</td>
						<td class="text-right">
							<span t-field="l.price_unit" />
						</td>
						<td class="text-right">
							<span t-field="l.price_subtotal" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
						</td>
					</tr>
				</tbody>

				<tbody t-if='o.specification' class="sale_tbody">
					<t>
						<t t-set='total_kit' t-value='0' />
						<t t-set='total_opt' t-value='0' />
						<t t-set='total_service' t-value='0' />
						<t t-set='total_opt_serv' t-value='0' />

						<t t-foreach="o.order_line" t-as="l">
							<t t-if='l.item_categ=="normal"'>
								<t t-set='total_kit' t-value='total_kit + l.price_subtotal' />
							</t>
							<t t-if='l.item_categ=="optional"'>
								<t t-set='total_opt' t-value='total_opt + l.price_subtotal' />
							</t>
							<t t-if='l.item_categ=="service"'>
								<t t-set='total_service' t-value='total_service + l.price_subtotal' />
							</t>
							<t t-if='l.item_categ=="opt_serv"'>
								<t t-set='total_opt_serv' t-value='total_opt_serv + l.price_subtotal' />
							</t>
						</t>
						<t t-set='total1' t-value='total_kit+total_opt' />
						<t t-set='total2' t-value='total1+total_service' />
						<t t-set='total3' t-value='total2+total_opt_serv' />
					</t>

					<tr>
						<td colspan="4"></td>
					</tr>
					<tr style="background-color:#C4D773">
						<td colspan="4">
							<strong>Base Kit</strong>
						</td>
					</tr>

					<t t-foreach="o.order_line" t-as="l">
						<t t-if='l.item_categ=="normal"'>

							<tr style="background-color:#D8E4BC">
								<td>
									<span t-field="l.name" />
									<div t-if="l.product_id.description_sale">
										<small t-field="l.product_id.description_sale" />
									</div>
								</td>
								<td class="text-right">
									<span t-field="l.product_uom_qty" />
									<span groups="product.group_uom" t-field="l.product_uom" />
								</td>
								<td class="text-right">
									<span />
								</td>
								<td class="text-right">
									<span />
								</td>
							</tr>
						</t>
					</t>
					<tr style="background-color:#C4D773">
						<th>
							<strong>Total Kit</strong>
						</th>
						<td class="text-right">
							<span t-field="o.qty_primary" />
							<span groups="product.group_uom" t-field="o.primary_uom" />
						</td>
						<td class="text-right">
							<t t-if='o.qty_primary'>
								<t t-set='price' t-value='total_kit/qty_primary' />
								<span t-esc='round(price,2)' />
								<span t-field="o.pricelist_id.currency_id.symbol" />
							</t>
						</td>
						<th class="text-right">
							<span t-esc='round(total_kit,2)' />
							<span t-field="o.pricelist_id.currency_id.symbol" />
						</th>
					</tr>

					<tr>
						<td colspan="4"></td>
					</tr>
					<tr style="background-color:#DA9694">
						<td colspan="4">
							<strong>Optional Items</strong>
						</td>
					</tr>

					<t t-foreach="o.order_line" t-as="l">
						<t t-if='l.item_categ=="optional"'>
							<tr style="background-color:#E6B8B7">
								<td>
									<span t-field="l.name" />
									<div t-if="l.product_id.description_sale">
										<small t-field="l.product_id.description_sale" />
									</div>
								</td>
								<td class="text-right">
									<span t-field="l.product_uom_qty" />
									<span groups="product.group_uom" t-field="l.product_uom" />
								</td>
								<td class="text-right">
									<span t-field="l.price_unit" />
								</td>
								<td class="text-right">
									<span t-field="l.price_subtotal" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
								</td>
							</tr>
						</t>
					</t>
					<tr style="background-color:#DA9694">
						<th colspan="3">
							<strong>Total Optional Items</strong>
						</th>
						<th class="text-right">
							<span t-esc='round(total_opt,2)' />
							<span t-field="o.pricelist_id.currency_id.symbol" />
						</th>
					</tr>
					<tr>
						<td colspan="4"></td>
					</tr>
					<tr style="background-color:#DA9694">

						<th>
							<strong>Total Kit + Optional</strong>
						</th>
						<td class="text-right">
							<span t-field="o.qty_primary" />
							<span groups="product.group_uom" t-field="o.primary_uom" />
						</td>
						<td class="text-right">
							<t t-if='o.qty_primary'>
								<t t-set='price' t-value='total1/qty_primary' />
								<span t-esc='round(price,2)' />
								<span t-field="o.pricelist_id.currency_id.symbol" />
							</t>
						</td>
						<th class="text-right">
							<span t-esc='round(total1,2)' />
							<span t-field="o.pricelist_id.currency_id.symbol" />
						</th>
					</tr>


					<tr>
						<td colspan="4"></td>
					</tr>
					<tr style="background-color:#B8CCE4">
						<td colspan="4">
							<strong>Service</strong>
						</td>
					</tr>

					<t t-foreach="o.order_line" t-as="l">
						<t t-if='l.item_categ=="service"'>
							<tr>
								<td>
									<span t-field="l.name" />
									<div t-if="l.product_id.description_sale">
										<small t-field="l.product_id.description_sale" />
									</div>
								</td>
								<td class="text-right">

								</td>
								<td class="text-right">

								</td>

								<td class="text-right">
									<span t-field="l.price_subtotal" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
								</td>
							</tr>
						</t>
					</t>
					<tr style="background-color:#B8CCE4">

						<th>
							<trong>Total Kit + Optional + Service</trong>
						</th>
						<td class="text-right">
							<span t-field="o.qty_primary" />
							<span groups="product.group_uom" t-field="o.primary_uom" />
						</td>
						<td class="text-right">
							<t t-if='o.qty_primary'>
								<t t-set='price' t-value='total2/qty_primary' />
								<span t-esc='round(price,2)' />
								<span t-field="o.pricelist_id.currency_id.symbol" />
							</t>
						</td>
						<th class="text-right">

							<span t-esc='round(total2,2)' />
							<span t-field="o.pricelist_id.currency_id.symbol" />
						</th>
					</tr>
					<tr>
						<td colspan="4"></td>
					</tr>

					<tr>
						<td colspan="4">
							<strong>Optional Service</strong>
						</td>
					</tr>

					<t t-foreach="o.order_line" t-as="l">
						<t t-if='l.item_categ=="opt_serv"'>
							<tr>
								<td>
									<div t-if="l.product_id.description_sale">
										<small t-field="l.product_id.description_sale" />
									</div>
								</td>
								<td class="text-right">

								</td>
								<td class="text-right">

								</td>
								<td class="text-right">
									<span t-field="l.price_subtotal" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
								</td>
							</tr>
						</t>
					</t>


				</tbody>


			</xpath>

			<xpath expr="//table/following-sibling::*[1]" position="replace">

			</xpath>

			<xpath expr="//p[@t-field='o.note']" position="before">
				<p style="background-color:#F8F8F8; color:#FF0000">This estimate is a contractual document we take responsibility for that.
					Any other technical and commercial communicated during our
					correspondence for this project are not included in this estimate will not be counted.
				</p>
				<p style="background-color:#D0D0D0">What is not included in the estimate will not be delivered!
				</p>
				<p style="background-color:#F8F8F8; color:#FF0000">Signing this document means accepting the offer commercial and technical responsibility by customer.
					Any other request later after
					signing this
					estimate will be subject to recalculation and a tender attached to this estimate.
				</p>
				<br />
				<br />
				<p>Customer signature</p>
				<br />
				<br />
				<br />
				<br />
			</xpath>

		</template>

		<template id="report_saleorder_document_specification1">
			<t t-call="report.external_layout">
				<div class="page">
					<div class="oe_structure" />
					<div class="row">
						<div class="col-xs-6">
							<strong t-if="o.partner_shipping_id == o.partner_invoice_id">Invoice and shipping address:</strong>
							<strong t-if="o.partner_shipping_id != o.partner_invoice_id">Invoice address:</strong>
							<div t-field="o.partner_invoice_id" t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}' />
							<p t-if="o.partner_id.vat">
								VAT:
								<span t-field="o.partner_id.vat" />
							</p>
							<div t-if="o.partner_shipping_id != o.partner_invoice_id" class="mt8">
								<strong>Shipping address:</strong>
								<div t-field="o.partner_shipping_id" t-field-options='{"widget": "contact", "fields": ["address", "name", "phone", "fax"], "no_marker": true}' />
								<p t-if="o.partner_id.vat">
									VAT:
									<span t-field="o.partner_id.vat" />
								</p>
							</div>
						</div>
						<div class="col-xs-5 col-xs-offset-1">
							<div t-field="o.partner_id" t-field-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}' />
						</div>
					</div>

					<h2>
						<span t-if="o.state not in ['draft','sent']">Order N° </span>
						<span t-if="o.state in ['draft','sent']">Quotation N° </span>
						<span t-field="o.name" />
					</h2>

					<div class="row mt32 mb32" id="informations">
						<div t-if="o.client_order_ref" class="col-xs-3">
							<strong>Your Reference:</strong>
							<p t-field="o.client_order_ref" />
						</div>
						<div t-if="o.date_order" class="col-xs-3">
							<strong t-if="o.state not in ['draft','sent']">Date Ordered:</strong>
							<strong t-if="o.state in ['draft','sent']">Quotation Date:</strong>
							<p t-field="o.date_order" />
						</div>
						<div t-if="o.user_id.name" class="col-xs-3">
							<strong>Salesperson:</strong>
							<p t-field="o.user_id.name" />
						</div>
						<div t-if="o.payment_term" class="col-xs-3">
							<strong>Payment Term:</strong>
							<p t-field="o.payment_term" />
						</div>
						<div t-if="o.specification" class="col-xs-3">
							<strong>Primary Quantity:</strong>
							<p>
								<t t-set='qty_primary' t-value='o.qty_primary or 1' />
								<span t-field="o.qty_primary" />
								<span t-field="o.primary_uom" />
							</p>
						</div>
					</div>

					<table class="table table-condensed">
						<thead>
							<tr>
								<th colspan="2">Description</th>
								<th class="text-right">Quantity</th>
								<th class="text-right">Unit Price</th>
								<th class="text-right">Price</th>
							</tr>
						</thead>

						<t>
							<t t-set='total_kit' t-value='0' />
							<t t-set='total_opt' t-value='0' />
							<t t-set='total_service' t-value='0' />
							<t t-set='total_opt_serv' t-value='0' />

							<t t-foreach="o.article_ids" t-as="a">
								<t t-if='a.item_categ=="normal"'>
									<t t-set='total_kit' t-value='total_kit + a.amount' />
								</t>
								<t t-if='a.item_categ=="optional"'>
									<t t-set='total_opt' t-value='total_opt + a.amount' />
								</t>
								<t t-if='a.item_categ=="service"'>
									<t t-set='total_service' t-value='total_service + a.amount' />
								</t>
								<t t-if='a.item_categ=="opt_serv"'>
									<t t-set='total_opt_serv' t-value='total_opt_serv + a.amount' />
								</t>
							</t>
							<t t-set='total1' t-value='total_kit+total_opt' />
							<t t-set='total2' t-value='total1+total_service' />
							<t t-set='total3' t-value='total2+total_opt_serv' />
						</t>


						<tbody class="sale_tbody">
							<tr style="background-color:#C4D773">
								<td colspan="5">
									<strong>Base Kit</strong>
								</td>
							</tr>

							<t t-foreach="o.article_ids" t-as="a">
								<t t-if='a.item_categ=="normal"'>
									<t t-call="deltatech_mrp_sale.report_specification_article1" />
								</t>
							</t>
							<tr style="background-color:#C4D773">
								<td colspan="2">
									<strong>Total Kit</strong>
								</td>
								<td class="text-right">
									<span t-field="o.qty_primary" />
									<span groups="product.group_uom" t-field="o.primary_uom" />
								</td>
								<td class="text-right">
									<t t-if='o.qty_primary'>
										<t t-set='price' t-value='total_kit/qty_primary' />
										<span t-esc='round(price,2)' />
										<span t-field="o.pricelist_id.currency_id.symbol" />
									</t>
								</td>
								<td class="text-right">
									<span t-esc='round(total_kit,2)' />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</td>
							</tr>
							<tr>
								<td colspan="5"></td>
							</tr>
							<tr style="background-color:#DA9694">
								<td colspan="5">
									<strong>Optional Items</strong>
								</td>
							</tr>


							<t t-foreach="o.article_ids" t-as="a">
								<t t-if='a.item_categ=="optional"'>
									<t t-call="deltatech_mrp_sale.report_specification_article1" />
								</t>
							</t>
							<tr style="background-color:#DA9694">
								<th colspan="4">
									<strong>Total Optional Items</strong>
								</th>
								<th class="text-right">
									<span t-esc='round(total_opt,2)' />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</th>
							</tr>
							<tr style="background-color:#DA9694">

								<th colspan="2">
									<strong>Total Kit + Optional</strong>
								</th>
								<td class="text-right">
									<span t-field="o.qty_primary" />
									<span groups="product.group_uom" t-field="o.primary_uom" />
								</td>
								<td class="text-right">
									<t t-if='o.qty_primary'>
										<t t-set='price' t-value='total1/qty_primary' />
										<span t-esc='round(price,2)' />
										<span t-field="o.pricelist_id.currency_id.symbol" />
									</t>
								</td>
								<th class="text-right">
									<span t-esc='round(total1,2)' />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</th>
							</tr>
							<tr>
								<td colspan="5"></td>
							</tr>
							<tr style="background-color:#B8CCE4">
								<td colspan="5">
									<strong>Service</strong>
								</td>
							</tr>

							<t t-foreach="o.article_ids" t-as="a">
								<t t-if='a.item_categ=="service"'>
									<t t-call="deltatech_mrp_sale.report_specification_article1" />
								</t>
							</t>
							<tr style="background-color:#B8CCE4">

								<th colspan="2">
									<trong>Total Kit + Optional + Service</trong>
								</th>
								<td class="text-right">
									<span t-field="o.qty_primary" />
									<span groups="product.group_uom" t-field="o.primary_uom" />
								</td>
								<td class="text-right">
									<t t-if='o.qty_primary'>
										<t t-set='price' t-value='total2/qty_primary' />
										<span t-esc='round(price,2)' />
										<span t-field="o.pricelist_id.currency_id.symbol" />
									</t>
								</td>
								<th class="text-right">

									<span t-esc='round(total2,2)' />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</th>
							</tr>
							<t t-foreach="o.article_ids" t-as="a">
								<t t-if='a.item_categ=="opt_serv"'>
									<t t-call="deltatech_mrp_sale.report_specification_article1" />
								</t>
							</t>

						</tbody>
					</table>

					<div class="row">
						<div class="col-xs-4 pull-right">
							<table class="table table-condensed">
								<tr class="border-black">
									<td>
										<strong>Total Without Taxes</strong>
									</td>
									<td class="text-right">
										<span t-field="o.amount_untaxed" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}' />
									</td>
								</tr>
								<tr>
									<td>Taxes</td>
									<td class="text-right">
										<span t-field="o.amount_tax" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}' />
									</td>
								</tr>
								<tr class="border-black">
									<td>
										<strong>Total</strong>
									</td>
									<td class="text-right">
										<span t-field="o.amount_total" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}' />
									</td>
								</tr>
							</table>
						</div>
					</div>
					<p style="background-color:#F8F8F8; color:#FF0000">This estimate is a contractual document we take responsibility for that.
						Any other technical and commercial communicated during our
						correspondence for this project are not included in this estimate will not be counted.
					</p>
					<p style="background-color:#D0D0D0">What is not included in the estimate will not be delivered!
					</p>
					<p style="background-color:#F8F8F8; color:#FF0000">Signing this document means accepting the offer commercial and technical responsibility by customer.
						Any other request later after
						signing this
						estimate will be subject to recalculation and a tender attached to this estimate.
					</p>
					<br />
					<br />
					<p>Customer signature</p>
					<br />
					<br />
					<br />
					<br />
					<p t-field="o.note" />
					<p t-if="o.payment_term.note">
						<strong>Payment Term:</strong>
						<span t-field="o.payment_term.note" />
					</p>
					<div class="oe_structure" />
				</div>
			</t>
		</template>

		<template id="report_specification_article1">
			<t t-if="a.product_uom_qty != 0.0">
				<tr>
					<td colspan="2">
						<b t-if='a.item_categ=="normal"'>
							<span t-field="a.name" />
						</b>
						<t t-if='a.item_categ!="normal"'>
							<span t-field="a.name" />
						</t>
						<div t-if="a.product_template.description_sale">
							<small t-field="a.product_template.description_sale" />
						</div>
					</td>
					<t t-if="a.resource_ids and len(a.resource_ids)==1">
						<td class="text-right">
							<span t-field="a.product_uom_qty" />
							<span groups="product.group_uom" t-field="a.product_uom" />
						</td>
						<td class="text-right">
							<span t-field="a.price_unit" />
						</td>

						<td class="text-right">
							<span t-field="a.amount" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}' />
						</td>
					</t>
					<t t-if="a.resource_ids and len(a.resource_ids)!=1">
						<td colspan="3">
							<span />
						</td>
					</t>
				</tr>
				<t t-if="a.resource_ids and len(a.resource_ids)>1">
					<tr t-foreach="a.resource_ids" t-as="r">
						<t t-if="r.product_uom_qty != 0.0">
							<td>
								<span />
							</td>

							<td>
								<i>
									<b t-if='r.item_categ=="normal"'>
										<span t-field="r.name" />
									</b>
									<t t-if='r.item_categ!="normal"'>
										<span t-field="r.name" />
									</t>
									<div t-if="r.product_id.description_sale">
										<small t-field="r.product_id.description_sale" />
									</div>
								</i>
							</td>

							<td class="text-right">
								<span t-field="r.product_uom_qty" />
								<span groups="product.group_uom" t-field="r.product_uom" />
							</td>
							<td class="text-right">
								<span t-field="r.price_unit" />
							</td>

							<td class="text-right">
								<span t-field="r.amount" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}' />
							</td>
						</t>
					</tr>
				</t>
			</t>

		</template>

		<template id="report_specification1">
			<t t-call="report.html_container">
				<t t-foreach="doc_ids" t-as="doc_id">
					<t t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'deltatech_mrp_sale.report_saleorder_document_specification1')" />
				</t>
			</t>
		</template>


		<template id="report_saleorder_document_specification2">
			<t t-call="report.external_layout">
				<div class="page">
					<div class="oe_structure" />
					<div class="row">
						<div class="col-xs-6">
							<strong t-if="o.partner_shipping_id == o.partner_invoice_id">Invoice and shipping address:</strong>
							<strong t-if="o.partner_shipping_id != o.partner_invoice_id">Invoice address:</strong>
							<div t-field="o.partner_invoice_id"
								t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;, &quot;fax&quot;], &quot;no_marker&quot;: true}" />
							<p t-if="o.partner_id.vat">
								VAT:
								<span t-field="o.partner_id.vat" />
							</p>
							<div t-if="o.partner_shipping_id != o.partner_invoice_id" class="mt8">
								<strong>Shipping address:</strong>
								<div t-field="o.partner_shipping_id"
									t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;, &quot;fax&quot;], &quot;no_marker&quot;: true}" />
								<p t-if="o.partner_id.vat">
									VAT:
									<span t-field="o.partner_id.vat" />
								</p>
							</div>
						</div>
						<div class="col-xs-5 col-xs-offset-1">
							<div t-field="o.partner_id"
								t-field-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: true}" />
						</div>
					</div>

					<h2>
						<span t-if="o.state not in ['draft','sent']">Order N° </span>
						<span t-if="o.state in ['draft','sent']">Quotation N° </span>
						<span t-field="o.name" />
					</h2>

					<div class="row mt32 mb32" id="informations">
						<div t-if="o.client_order_ref" class="col-xs-3">
							<strong>Your Reference:</strong>
							<p t-field="o.client_order_ref" />
						</div>
						<div t-if="o.date_order" class="col-xs-3">
							<strong t-if="o.state not in ['draft','sent']">Date Ordered:</strong>
							<strong t-if="o.state in ['draft','sent']">Quotation Date:</strong>
							<p t-field="o.date_order" />
						</div>
						<div t-if="o.user_id.name" class="col-xs-3">
							<strong>Salesperson:</strong>
							<p t-field="o.user_id.name" />
						</div>
						<div t-if="o.payment_term" class="col-xs-3">
							<strong>Payment Term:</strong>
							<p t-field="o.payment_term" />
						</div>
						<div t-if="o.specification" class="col-xs-3">
							<strong>Primary Quantity:</strong>
							<p>
								<t t-set="qty_primary" t-value="o.qty_primary or 1" />
								<span t-field="o.qty_primary" />
								<span t-field="o.primary_uom" />
							</p>
						</div>
					</div>

					<table class="table table-condensed">
						<thead>
							<tr>
								<th colspan="2">Description</th>
								<th class="text-right">Quantity</th>
								<th class="text-right">Unit Price</th>
								<th class="text-right">Price</th>
							</tr>
						</thead>

						<t>
							<t t-set="total_kit" t-value="0" />
							<t t-set="total_primary" t-value="0" />
							<t t-set="total_opt" t-value="0" />
							<t t-set="total_service" t-value="0" />
							<t t-set="total_opt_serv" t-value="0" />

							<t t-foreach="o.article_ids" t-as="a">
								<t t-if="a.item_categ==&quot;normal&quot; or a.item_categ==&quot;primary&quot;">
									<t t-set="total_kit" t-value="total_kit + a.amount" />
								</t>
								<t t-if="a.item_categ==&quot;primary&quot;">
									<t t-set="total_primary" t-value="total_primary + a.amount" />
								</t>
								<t t-if="a.item_categ==&quot;optional&quot;">
									<t t-set="total_opt" t-value="total_opt + a.amount" />
								</t>
								<t t-if="a.item_categ==&quot;service&quot;">
									<t t-set="total_service" t-value="total_service + a.amount" />
								</t>
								<t t-if="a.item_categ==&quot;opt_serv&quot;">
									<t t-set="total_opt_serv" t-value="total_opt_serv + a.amount" />
								</t>
							</t>
							<t t-set="total1" t-value="total_kit+total_opt" />
							<t t-set="total2" t-value="total1+total_service" />
							<t t-set="total3" t-value="total2+total_opt_serv" />
						</t>


						<tbody class="sale_tbody">
							<tr style="background-color:#C4D773">
								<td colspan="5">
									<strong>Base Kit</strong>
								</td>
							</tr>

							<t t-foreach="o.article_ids" t-as="a">
								<t t-if="a.item_categ==&quot;normal&quot;">
									<t t-call="deltatech_mrp_sale.report_specification_article2" />
								</t>
							</t>

							<tr>
								<td colspan="2">
									<strong>Studiu tehnic + Piese asamblare</strong>
								</td>
								<td class="text-right">

								</td>
								<td class="text-right">

								</td>
								<td class="text-right" style="white-space: nowrap;">
									<span t-esc="round(total_primary,2)" />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</td>
							</tr>

							<tr style="background-color:#C4D773">
								<td colspan="2">
									<strong>Total Kit</strong>
								</td>
								<td class="text-right">
									<span t-field="o.qty_primary" />
									<span groups="product.group_uom" t-field="o.primary_uom" />
								</td>
								<td class="text-right" style="white-space: nowrap;">
									<t t-if="o.qty_primary">
										<t t-set="price" t-value="total_kit/qty_primary" />
										<span t-esc="round(price,2)" />
										<span t-field="o.pricelist_id.currency_id.symbol" />
									</t>
								</td>
								<td class="text-right" style="white-space: nowrap;">
									<span t-esc="round(total_kit,2)" />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</td>
							</tr>
							<tr>
								<td colspan="5" />
							</tr>
							<tr style="background-color:#DA9694">
								<td colspan="5">
									<strong>Optional Items</strong>
								</td>
							</tr>


							<t t-foreach="o.article_ids" t-as="a">
								<t t-if="a.item_categ==&quot;optional&quot;">
									<t t-call="deltatech_mrp_sale.report_specification_article2" />
								</t>
							</t>
							<tr style="background-color:#DA9694">
								<th colspan="4">
									<strong>Total Optional Items</strong>
								</th>
								<th class="text-right" style="white-space: nowrap;">
									<span t-esc="round(total_opt,2)" />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</th>
							</tr>
							<tr style="background-color:#DA9694">

								<th colspan="2">
									<strong>Total Kit + Optional</strong>
								</th>
								<td class="text-right">
									<span t-field="o.qty_primary" />
									<span groups="product.group_uom" t-field="o.primary_uom" />
								</td>
								<td class="text-right" style="white-space: nowrap;">
									<t t-if="o.qty_primary">
										<t t-set="price" t-value="total1/qty_primary" />
										<span t-esc="round(price,2)" />
										<span t-field="o.pricelist_id.currency_id.symbol" />
									</t>
								</td>
								<th class="text-right" style="white-space: nowrap;">
									<span t-esc="round(total1,2)" />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</th>
							</tr>
							<tr>
								<td colspan="5" />
							</tr>
							<tr style="background-color:#B8CCE4">
								<td colspan="5">
									<strong>Service</strong>
								</td>
							</tr>

							<t t-foreach="o.article_ids" t-as="a">
								<t t-if="a.item_categ==&quot;service&quot;">
									<t t-call="deltatech_mrp_sale.report_specification_article2" />
								</t>
							</t>
							<tr style="background-color:#B8CCE4">

								<th colspan="2">
									<trong>Total Kit + Optional + Service</trong>
								</th>
								<td class="text-right">
									<span t-field="o.qty_primary" />
									<span groups="product.group_uom" t-field="o.primary_uom" />
								</td>
								<td class="text-right" style="white-space: nowrap;">
									<t t-if="o.qty_primary">
										<t t-set="price" t-value="total2/qty_primary" />
										<span t-esc="round(price,2)" />
										<span t-field="o.pricelist_id.currency_id.symbol" />
									</t>
								</td>
								<th class="text-right" style="white-space: nowrap;">

									<span t-esc="round(total2,2)" />
									<span t-field="o.pricelist_id.currency_id.symbol" />
								</th>
							</tr>
							<t t-foreach="o.article_ids" t-as="a">
								<t t-if="a.item_categ==&quot;opt_serv&quot;">
									<t t-call="deltatech_mrp_sale.report_specification_article2" />
								</t>
							</t>

						</tbody>
					</table>

					<div class="row">
						<div class="col-xs-4 pull-right">
							<table class="table table-condensed">
								<tr class="border-black">
									<td>
										<strong>Total Without Taxes</strong>
									</td>
									<td class="text-right">
										<span t-field="o.amount_untaxed" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
									</td>
								</tr>
								<tr>
									<td>Taxes</td>
									<td class="text-right">
										<span t-field="o.amount_tax" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
									</td>
								</tr>
								<tr class="border-black">
									<td>
										<strong>Total</strong>
									</td>
									<td class="text-right">
										<span t-field="o.amount_total" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
									</td>
								</tr>
							</table>
						</div>
					</div>
					<p style="background-color:#F8F8F8; color:#FF0000">This estimate is a contractual document we take responsibility for that.
						Any other technical and commercial communicated during our
						correspondence for this project are not included in this estimate will not be counted.
					</p>
					<p style="background-color:#D0D0D0">What is not included in the estimate will not be delivered!
					</p>
					<p style="background-color:#F8F8F8; color:#FF0000">Signing this document means accepting the offer commercial and technical responsibility by customer.
						Any other request later after
						signing this
						estimate will be subject to recalculation and a tender attached to this estimate.
					</p>
					<br />
					<br />
					<p>Customer signature</p>
					<br />
					<br />
					<br />
					<br />
					<p t-field="o.note" />
					<p t-if="o.payment_term.note">
						<strong>Payment Term:</strong>
						<span t-field="o.payment_term.note" />
					</p>
					<div class="oe_structure" />
				</div>
			</t>
		</template>


		<template id="report_specification_article2">
			<t t-if="a.product_uom_qty != 0.0">
				<tr>
					<td colspan="2">
						<b t-if="a.item_categ==&quot;normal&quot;">
							<span t-field="a.name" />
						</b>
						<t t-if="a.item_categ!=&quot;normal&quot;">
							<span t-field="a.name" />
						</t>
						<div t-if="a.product_template.description_sale">
							<small t-field="a.product_template.description_sale" />
						</div>
					</td>
					<t t-if="a.resource_ids and len(a.resource_ids)==1">
						<td class="text-right" style="white-space: nowrap;">
							<span t-field="a.product_uom_qty" />
							<span groups="product.group_uom" t-field="a.product_uom" />
						</td>
						<td class="text-right" style="white-space: nowrap;">
							<span t-field="a.price_unit" />
						</td>

						<td class="text-right" style="white-space: nowrap;">
							<span t-field="a.amount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
						</td>
					</t>
					<t t-if="a.resource_ids and len(a.resource_ids)!=1">
						<td class="text-right" style="white-space: nowrap;">
							<span t-field="a.product_uom_qty" />
							<span groups="product.group_uom" t-field="a.product_uom" />
						</td>
						<td class="text-right" style="white-space: nowrap;">
							<span t-field="a.price_unit" />
						</td>

						<td class="text-right" style="white-space: nowrap;">
							<strong t-field="a.amount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: &quot;o.pricelist_id.currency_id&quot;}" />
						</td>
					</t>
				</tr>
				<t t-if="a.resource_ids and len(a.resource_ids)&gt;1">
					<tr t-foreach="a.resource_ids" t-as="r">
						<t t-if="r.product_uom_qty != 0.0">
							<td>
								<span />
							</td>

							<td>
								<i>
									<b t-if="r.item_categ==&quot;normal&quot;">
										<span t-field="r.name" />
									</b>
									<t t-if="r.item_categ!=&quot;normal&quot;">
										<span t-field="r.name" />
									</t>
									<div t-if="r.product_id.description_sale">
										<small t-field="r.product_id.description_sale" />
									</div>
								</i>
							</td>
							<!-- <td class="text-right"> <span t-field="r.product_uom_qty"/> <span groups="product.group_uom" t-field="r.product_uom"/> </td> <td class="text-right"> 
								<span t-field="r.price_unit"/> </td> <td class="text-right"> <span t-field="r.amount" t-field-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: 
								&quot;o.pricelist_id.currency_id&quot;}"/> </td> -->
							<td></td>
							<td></td>
							<td></td>
						</t>
					</tr>
				</t>
			</t>

		</template>



		<template id="report_specification2">
			<t t-call="report.html_container">
				<t t-foreach="doc_ids" t-as="doc_id">
					<t t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'deltatech_mrp_sale.report_saleorder_document_specification2')" />
				</t>
			</t>
		</template>

	</data>
</openerp>
